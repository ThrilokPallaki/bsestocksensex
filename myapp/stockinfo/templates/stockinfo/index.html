<!DOCTYPE html>
<html>
{% load static %}
    <head>
	<title>BSE :: SENSEX </title>
	<style>
		.title-head{
			position:fixed;
			left:38%;
			font-size:50px;
			text-shadow:2px 2px 5px rgb(186, 187, 188,0.8 );
			color:rgb(252, 130, 42);
			display:inline-block;
		}
		.main-container{
			 height: 65%;
   			 width: 80%;
    			 box-shadow:2px 2px 5px 6px  rgb(186, 187, 188,0.8 );
    			 position:fixed;
    			 top: 30%;
			 left:10%;
			 margin-top:-100px;
			 border-radius:5px;
			 overflow-y:scroll;
		}
		thead{
			background-color:rgb(186, 187, 188)
		}
		th{ padding:10px 57.5px 10px 57.5px;}
		td{ padding: 10px 32px 10px 64px;
		    background-color:rgb(119, 119, 119);
		 }
		.query-form{
			float:right;
			margin:50px 150px 0px 0px;	
		}
		.alert {
			 padding: 20px;
			 background-color: #f44336;
			 color: white;
			 border-style:5px solid #c4c5c6;
		}

		.closebtn {
    			 margin-left: 15px;
    			 color: white;
    			 font-weight: bold;
    			 float: right;
    			 font-size: 22px;
    			 line-height: 20px;
    			 cursor: pointer;
    			 transition: 0.3s;
		}

		.closebtn:hover {
    			color: black;
		}
	</style>
	<script>
		function validationForm(){ 
			var query = document.forms["search_query"]["query"].value;
			if(query ==""|| query == null){
				alert('Search box is empty');
				return false;
			}
		}
	</script>
    </head>
    <body background="{% static 'stockinfo/images/bse.jpg' %}">
	<h1 class="title-head">BSE SENSEX </h1>
	<form class="query-form" method="post" action="" name="search_query" onsubmit="return validationForm()">{% csrf_token %}
		<input type='text'autocomplete='false' name='query' value=''placeholder='search by name' pattern="[a-zA-Z0-9\s]{1,}" title="Only alphabets and numbers are allowed." />
		<button type="submit">search</button>
	</form>
	<div class="main-container">
	    <table style="width:100%;" >
		<thead><th>NAME</th><th>CODE</th><th>HIGH</th><th>OPEN</th><th>LOW</th><th>CLOSE</th></thead>
	{% if error %}
		<div class="alert">
  			<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  			<strong>Sorry!  </strong>No record found with the name.
		</div>
	{% else %}
		{% for data in sensex_data %}
		  {% for row in data %}
		  	<tr><td>{{row.SC_NAME}}</td><td>{{row.SC_CODE}}</td><td>{{row.HIGH}}</td><td>{{row.OPEN}}</td><td>{{row.LOW}}</td><td>{{row.CLOSE}}</td></tr>
		  {% endfor %}
		{% endfor %}
	    </table>
	{% endif %}
	</div>
		<div class="paginator" style="position:fixed; left:40%; top:85%;">
   		     <span class="step-links">
               		 {% if sensex_data.has_previous %}
                        	<a href="?page={{ sensex_data.previous_page_number }}">previous</a>
                	{% endif %}
                     <span class="current">
                         Page {{ sensex_data.number }} of {{ sensex_data.paginator.num_pages }}.
        	     </span>
        	    {% if sensex_data.has_next %}
            		<a href="?page={{ sensex_data.next_page_number }}">next</a>
        	    {% endif %}
   		     </span>
	        </div>
    </body>
</html>
